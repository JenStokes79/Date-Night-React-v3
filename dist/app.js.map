{"version":3,"sources":["../server/app.js"],"names":["mongoose","require","port","process","env","PORT","console","log","app","use","join","__dirname","json","urlencoded","extended","static","connect","MONGODB_URI","name","get","response","req","res","sendFile"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAIA;;;;AAEA;;;;;;AALA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;;AAGAC,QAAQC,GAAR,CAAY,SAAZ;;;AAGA,IAAMC,MAAM,wBAAZ;;AAEA;;;AAGAA,IAAIC,GAAJ,CAAQ,4BAAQ,eAAKC,IAAL,CAAUC,SAAV,EAAqB,aAArB,CAAR,CAAR;AACAH,IAAIC,GAAJ,CAAQ,uBAAR,E,CAAmB;AACnBD,IAAIC,GAAJ,CAAQ,4BAAR;AACAD,IAAIC,GAAJ,CAAQ,sBAAO,MAAP,CAAR;AACAD,IAAIC,GAAJ,CAAQ,qBAAWG,IAAX,EAAR;AACAJ,IAAIC,GAAJ,CAAQ,qBAAWI,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACA;AACAN,IAAIC,GAAJ,CAAQ,SAAR,EAAmB,kBAAQM,MAAR,CAAe,eAAKL,IAAL,CAAUC,SAAV,EAAqB,QAArB,EAA+B,QAA/B,CAAf,CAAnB;;AAEA;;AAEA;;;;AAIA;;AAEA;;AAEA;;;;AAIA;;AAEA;;AAEAX,SAASgB,OAAT,CAAiBb,QAAQC,GAAR,CAAYa,WAAZ,IAA2B,oCAA5C,EAAkF;AAChF;AADgF,CAAlF;;AAMA;;AAEAhB,QAAQ,qBAAR,EAA+BO,GAA/B;AACAP,QAAQ,qBAAR,EAA+BO,GAA/B;AACAP,QAAQ,0BAAR,EAAoCO,GAApC;AACAP,QAAQ,0BAAR,EAAoCO,GAApC;;AAGA;AACA;AACAF,QAAQC,GAAR,CAAY,KAAZ;AACA,IAAI,cAAIW,IAAJ,KAAa,YAAjB,EAA+B;AAC7BV,MAAIW,GAAJ,CAAQ,GAAR,EAAa,SAASC,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4B;AACvCA,QAAIC,QAAJ,CAAa,eAAKb,IAAL,CAAUC,SAAV,EAAqB,QAArB,EAA+B,YAA/B,CAAb;AACD,GAFD;AAGD;;AAED;AACA;AACA;AACA;;AAEA;AACA;kBACeH,G","file":"app.js","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport logger from 'morgan';\nimport favicon from 'serve-favicon';\nimport helmet from 'helmet';\nimport compression from 'compression';\nimport path from 'path';\nconst mongoose = require(\"mongoose\");\nconst port = process.env.PORT || 3006;\n\nimport env from './config/env';\nconsole.log('env top', env);\nimport routes from './routes/api';\n\nconst app = express();\n\n/*==================================\n=            Middleware            =\n==================================*/\napp.use(favicon(path.join(__dirname, 'favicon.ico')));\napp.use(helmet()); // Helmet helps you secure your Express apps by setting various HTTP headers.\napp.use(compression());\napp.use(logger('tiny'));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n// serve static files, this is for frontend React\napp.use('/static', express.static(path.join(__dirname, 'public', 'static')));\n\n/*=====  End of Middleware  ======*/\n\n/*===========================================\n=            Baic Authentication            =\n===========================================*/\n\n// app.use(require('node-basicauth')({'haochuan': 'password'}));\n\n/*=====  End of Baic Authentication  ======*/\n\n/*===========================\n=            COR            =\n===========================*/\n\n// app.use(require('cors')());\n\n/*=====  End of COR  ======*/\n\nmongoose.connect(process.env.MONGODB_URI || \"mongodb://localhost/datenightusers\", {\n  // <useMongoClient:></useMongoClient:> true\n});\n\n\n\n// API routes - list routes individually\n\nrequire('./routes/api/signin')(app);\nrequire('./routes/api/search')(app);\nrequire('./routes/api/wheelSearch')(app);\nrequire('./routes/api/searchMovie')(app);\n\n\n// Load React App\n// Serve HTML file for production\nconsole.log('env', env)\nif (env.name === 'production') {\n  app.get('*', function response(req, res) {\n    res.sendFile(path.join(__dirname, 'public', 'index.html'));\n  });\n}\n\n// app.listen(port, \"0.0.0.0\", err => {\n//   if (err) {\n//     console.log(err);\n//   }\n\n//   console.info(\">>> ðŸŒŽ Open http://0.0.0.0:%s/ in your browser.\", port);\n// });\nexport default app;\n"]}